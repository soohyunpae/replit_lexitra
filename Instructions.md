
# 대시보드 통계 수치 문제 해결 방안

## 1. 현재 상황
- 대시보드의 통계 카드가 모두 0으로 표시되는 문제 발생
- 영향받는 통계:
  - 진행 중인 프로젝트 수
  - 검토 대기 중인 세그먼트 수
  - 참여 가능한 프로젝트 수

## 2. 문제 원인 분석
### 2.1 API 응답 구조 
- `/api/projects/review-stats` 엔드포인트의 실제 응답이 예상과 다름
- 통계 계산 로직이 실제 데이터를 정확하게 반영하지 못함

### 2.2 데이터 조회 로직 문제
- 진행 중인 프로젝트 조회 시 "In Progress" 상태 필터링이 잘못됨
- 검토 대기 중인 세그먼트 계산 시 "Reviewed" 상태가 아닌 세그먼트를 제대로 카운트하지 못함

## 3. 해결 방안

### 3.1 프로젝트 통계 엔드포인트 수정
1. server/routes.ts 파일에서 `/api/projects/review-stats` 엔드포인트 수정
   - 진행 중인 프로젝트를 "In Progress" 상태로 정확하게 필터링
   - 프로젝트의 모든 파일과 세그먼트를 효율적으로 조회

2. 통계 계산 로직 수정
   - "In Progress" 상태의 프로젝트만 포함
   - "Reviewed" 상태가 아닌 모든 세그먼트를 검토 대기 중으로 계산
   - "Unclaimed" 상태의 프로젝트를 참여 가능한 프로젝트로 계산

### 3.2 클라이언트 통계 표시 개선
1. dashboard.tsx에서 통계 데이터 처리 로직 수정
   - API 응답 구조에 맞게 데이터 매핑 수정
   - 기본값 처리 로직 개선
   - 에러 처리 및 로딩 상태 구현

### 3.3 성능 최적화
- 통계 계산을 위한 데이터베이스 쿼리 최적화
- 필요한 데이터만 선택적으로 조회하도록 수정
- 캐싱 전략 구현 검토

## 4. 구현 우선순위
1. API 엔드포인트 수정
2. 통계 계산 로직 개선
3. 클라이언트 표시 로직 수정
4. 성능 최적화

## 5. 테스트 계획
1. 각 상태별 프로젝트 생성하여 통계 확인
2. 세그먼트 상태 변경에 따른 통계 업데이트 확인
3. 대량의 데이터에서 성능 테스트
